%h1 Segnala la tua presenza agli interventi
%h2 Linux Day 2013 - BGlug

%p Puoi segnalarci la tua presenza utilizzando il seguente modulo.

.forms
  :javascript
    $().ready(function() {
      // Valida form.
      $("#segui").validate({
        rules: {
          nome: "required",
          email: "required",
          captcha_answer: "required",
          nome: {
            required: true,
            minlength: 3
          },
          email: {
            required: true,
            email: true
          },
          accompagnati: "number",
          note: {
            maxlength: 300
          },
          captcha_answer: {
            minlength: 4,
            maxlength: 4
          }
        },
        messages: {
          name: "Inserisci il tuo nome e cognome, di almeno 3 lettere.",
          email: "Inserisci un indirizzo email valido.",
          note: "Le note non possono essere più lunghe di 300 caratteri."
        }
      });
      $('#note').keyup(function() {
        var max = 300;
        var len = $(this).val().length;
        if (len >= max) {
          $('#counter').text("Termine lettere a disposizione.");
        } else {
          var char = max - len;
          $('#counter').html(char + ' lettere rimanenti.');
        }
      });
    });
  %form(action="/ld/2013/conferma" method="post" id="segui")
    %table
      %tr
        %th
          %label(for="nome") Nome e Cognome <span class="required">*</span>
        %td
          %input(type='text' name='nome' autofocus required)
      %tr
        %th
          %label(for='email') Email <span class="required">*</span>
        %td
          %input(type='email' name='email' required)
      %tr
        %th Porterai altre persone con te?
        %td
          %label(for='si') Sì
          %input(type='radio' id='si' name='accompagnatore' value='Sì' style="width: auto;")
          %br
          %label(for='no') No
          %input(type='radio' id='no' name='accompagnatore' value='No' style="width: auto;" checked)
      %tr
        %th
          %label(for='accompagnati') Se sì, quante persone pensi di accompagnare?
        %td
          %input(type='text' name='accompagnati' value='0')
      %tr
        %th
          %label(for='note') Note
        %td
          %textarea#note(name="note" rows="6" cols="40" maxlength="300")
          %br
          %p#counter 300 lettere rimanenti.
      = haml 'ld/2013/captcha'.to_sym
    .buttons
      %input(type='hidden' name='azione' value='segui')
      %input(type="submit" name="submit" value="Conferma")
      %input(type="reset" name="cancel" value="Cancella modulo")
